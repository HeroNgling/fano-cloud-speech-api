---
title: "Streaming Transcription"
description: "Real-time speech recognition using WebSocket for live audio streams"
icon: "signal-stream"
---

<Note>
This is a **WebSocket API**. Unlike REST APIs, you establish a persistent connection and exchange messages bidirectionally.
</Note>

## Overview

The Streaming Transcription API enables real-time speech-to-text transcription over a WebSocket connection. It's optimized for low-latency applications where immediate transcription feedback is essential.

<CardGroup cols={2}>
  <Card title="Live Agent Assist" icon="headset">
    Transcribe contact center calls in real-time to trigger compliance alerts
  </Card>
  <Card title="Meeting Transcription" icon="users">
    Live notetaking for Cantonese, Mandarin, and English meetings
  </Card>
  <Card title="Voice Assistants" icon="microphone">
    Real-time voice command processing
  </Card>
  <Card title="Captioning" icon="closed-captioning">
    Live subtitles for broadcasts and streams
  </Card>
</CardGroup>

---

## Quick Start

<Steps>
  <Step title="Get your API Key">
    Obtain your `Fano-license-key` from the Developer Portal
  </Step>
  <Step title="Connect to WebSocket">
    Establish a secure WebSocket connection to the endpoint
  </Step>
  <Step title="Send Configuration">
    Initialize the session with your language and audio settings
  </Step>
  <Step title="Stream Audio">
    Send audio chunks and receive real-time transcriptions
  </Step>
</Steps>

---

## Base URL

```bash
wss://app.fano.ai/api/v1/speech-to-text/streaming-transcript
```

---

## Authentication

<ParamField header="Fano-license-key" type="string" required>
  Your unique license key provided by Fano Labs. Include this in the WebSocket handshake headers.
</ParamField>

---

## Connection Workflow

```mermaid
sequenceDiagram
    participant Client
    participant Server
    
    Client->>Server: 1. WebSocket Connect (with Fano-license-key)
    Server-->>Client: Connection Established
    
    Client->>Server: 2. Configure (languageCode, encoding, etc.)
    Server-->>Client: Configuration Accepted
    
    loop Streaming
        Client->>Server: 3. Send Audio Chunk (base64)
        Server-->>Client: 4. Transcription Result
    end
    
    Client->>Server: 5. Send EOF
    Server-->>Client: Connection Closed
```

---

## Message Types

| Step | Direction | Message | Description |
|------|-----------|---------|-------------|
| 1 | Client → Server | [Configure](/api-reference/streaming-stt/configure-stream) | Initialize session settings |
| 2 | Client → Server | [Audio Chunk](/api-reference/streaming-stt/send-audio-chunk) | Send audio data (Base64) |
| 3 | Server → Client | [Result](/api-reference/streaming-stt/receive-results) | Transcription results |
| 4 | Client → Server | [EOF](/api-reference/streaming-stt/send-eof) | End the session |

---

## Code Examples

<Tabs>
  <Tab title="Python">
```python
import asyncio
import websockets
import json
import base64

API_KEY = 'YOUR_FANO_API_KEY'
URL = "wss://app.fano.ai/api/v1/speech-to-text/streaming-transcript"

async def stream_audio():
    headers = {"Fano-license-key": API_KEY}
    
    config_msg = {
        "config": {
            "languageCode": "yue-x-auto",
            "sampleRateHertz": 16000,
            "encoding": "LINEAR16",
            "enableAutomaticPunctuation": True,
            "interimResults": True
        }
    }

    async with websockets.connect(URL, extra_headers=headers) as ws:
        # Send configuration
        await ws.send(json.dumps(config_msg))
        print("Connected to Fano Streaming API...")

        # Example: Send audio file in chunks
        with open("audio.raw", "rb") as f:
            while chunk := f.read(3200):
                audio_msg = {
                    "audioContent": base64.b64encode(chunk).decode()
                }
                await ws.send(json.dumps(audio_msg))
                
                # Receive results
                try:
                    response = await asyncio.wait_for(ws.recv(), timeout=0.1)
                    result = json.loads(response)
                    if result.get("results"):
                        transcript = result["results"][0]["alternatives"][0]["transcript"]
                        is_final = result["results"][0].get("isFinal", False)
                        prefix = "Final" if is_final else "Interim"
                        print(f"{prefix}: {transcript}")
                except asyncio.TimeoutError:
                    pass

        # Send EOF
        await ws.send(json.dumps({"eof": True}))

asyncio.run(stream_audio())
```
  </Tab>
  <Tab title="JavaScript">
```javascript
const WebSocket = require('ws');

const API_KEY = 'YOUR_FANO_API_KEY';
const URL = 'wss://app.fano.ai/api/v1/speech-to-text/streaming-transcript';

const ws = new WebSocket(URL, {
  headers: { 'Fano-license-key': API_KEY }
});

ws.on('open', () => {
  console.log('Connected to Fano Streaming API...');

  // Send configuration
  ws.send(JSON.stringify({
    config: {
      languageCode: 'yue-x-auto',
      sampleRateHertz: 16000,
      encoding: 'LINEAR16',
      enableAutomaticPunctuation: true,
      interimResults: true
    }
  }));

  // Example: Send audio chunks
  // In real usage, stream from microphone or file
  const audioChunk = Buffer.from('...').toString('base64');
  ws.send(JSON.stringify({ audioContent: audioChunk }));
});

ws.on('message', (data) => {
  const response = JSON.parse(data);
  
  if (response.results?.[0]) {
    const { transcript } = response.results[0].alternatives[0];
    const isFinal = response.results[0].isFinal;
    console.log(`${isFinal ? 'Final' : 'Interim'}: ${transcript}`);
  }
  
  if (response.error) {
    console.error('Error:', response.error.message);
  }
});

ws.on('close', () => console.log('Connection closed'));
ws.on('error', (err) => console.error('Error:', err));
```
  </Tab>
  <Tab title="wscat (Test)">
```bash
# Install wscat for WebSocket testing
npm install -g wscat

# Connect to the streaming endpoint
wscat -c "wss://app.fano.ai/api/v1/speech-to-text/streaming-transcript" \
  -H "Fano-license-key: YOUR_API_KEY"

# Then send messages:
> {"config":{"languageCode":"en","sampleRateHertz":16000,"encoding":"LINEAR16"}}
> {"audioContent":"BASE64_AUDIO_DATA"}
> {"eof":true}
```
  </Tab>
</Tabs>

---

## Audio Requirements

<Warning>
Audio must conform to these requirements or transcription will fail.
</Warning>

| Requirement | Specification |
|-------------|---------------|
| **Encoding** | `LINEAR16` (PCM 16-bit) or `MULAW` |
| **Channels** | Single channel (mono) only |
| **Sample Rate** | 8000 Hz - 48000 Hz |
| **Recommended Rate** | 16000 Hz |
| **Chunk Size** | 100ms - 500ms recommended |

---

## Supported Languages

| Code | Language | Notes |
|------|----------|-------|
| `yue` | Cantonese | |
| `cmn` | Mandarin Chinese | |
| `en` | English | |
| `yue-x-auto` | Multilingual | Automatic language detection for code-switching |
